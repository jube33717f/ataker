{"ast":null,"code":"var _jsxFileName = \"/Users/jubi/fullStack/groupProject/0322/xyz.frontend/src/pages/auth/login-form.js\";\nimport React, { Component } from \"react\";\nimport ValidationHoc from \"../../hoc/validationHoc\";\nimport BlurBackgroundHoc from \"../../hoc/blurBackgroundHoc\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faWindowClose } from \"@fortawesome/free-solid-svg-icons\";\nimport facebookIcon from \"../../assets/facebook.png\";\nimport googleIcon from \"../../assets/google.png\";\nimport { withRouter, Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { login, logoutUser } from \"../../redux/actions\";\nimport InputComponent from \"../../hoc/inputComponent\";\nimport { deleteLastSubPath } from \"../../utils/path-generator\";\nimport \"./auth.scss\"; // TODO @SONIA\n\nclass LoginForm extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  componentDidMount() {\n    this.props.blurBackground();\n\n    if (this.props.location.state) {\n      this.props.setHocData({ ...this.props.location.state.signupValues\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.resetBackground();\n  }\n\n  async componentDidUpdate(prevProps, prevState) {\n    //监听props.user。每改变一下email和password，state和props改变，就会重新渲染。\n    if (JSON.stringify(prevProps.user) !== JSON.stringify(this.props.user)) {\n      if (Object.keys(this.props.user).length !== 0) {\n        if (this.props.user.errMsg) {\n          alert(this.props.user.errMsg); //处理两次失败请求\n\n          this.props.logoutUser(); //改变redux里的状态，第二次失败请求触发componentdidupdate\n        } else {\n          const {\n            pathname\n          } = this.props.location;\n\n          if (this.props.match.params[0] === 'home') {\n            this.props.history.push(\"/account/dashboard\");\n          } else {\n            this.props.history.push(deleteLastSubPath(pathname));\n          }\n        }\n      }\n    }\n  }\n\n  render() {\n    const {\n      pathname\n    } = this.props.history.location;\n    return React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container--not-blured\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"auth-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form__header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, \"Log in\", React.createElement(FontAwesomeIcon, {\n      icon: faWindowClose,\n      className: \"button-close\",\n      onClick: () => {\n        this.props.history.push(deleteLastSubPath(pathname));\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"auth-form__content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, React.createElement(InputComponent, Object.assign({}, this.props, {\n      title: \"Email\",\n      name: \"email\",\n      placeholder: \"Email\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    })), React.createElement(InputComponent, Object.assign({}, this.props, {\n      title: \"Password\",\n      name: \"password\",\n      placeholder: \"Password\",\n      type: \"password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    })), React.createElement(Link, {\n      to: \"\",\n      className: \"blue-link\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, \"Forget password?\")), React.createElement(\"div\", {\n      className: \"bottom-buttons\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: async () => {\n        if (await this.props.okToSubmit()) {\n          this.props.login(this.props.values);\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, \"Log in\")), React.createElement(\"div\", {\n      className: \"seperator-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, \"or login with\"), React.createElement(\"div\", {\n      className: \"bottom-buttons bottom-buttons--social-media\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: facebookIcon,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }), \"Facebook\"), React.createElement(\"button\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: googleIcon,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }), \"Google\")), React.createElement(\"div\", {\n      className: \"auth-form__bottom-section\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"Don't have an account?\", React.createElement(\"button\", {\n      className: \"blue-link\",\n      onClick: () => {\n        this.props.history.push(`${deleteLastSubPath(pathname)}/signup`);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, \"Sign up\")))));\n  }\n\n}\n\nexport default connect(state => ({\n  user: state.user\n}), {\n  login,\n  logoutUser\n})(BlurBackgroundHoc(ValidationHoc(withRouter(LoginForm), ['email', 'password'])));","map":{"version":3,"sources":["/Users/jubi/fullStack/groupProject/0322/xyz.frontend/src/pages/auth/login-form.js"],"names":["React","Component","ValidationHoc","BlurBackgroundHoc","FontAwesomeIcon","faWindowClose","facebookIcon","googleIcon","withRouter","Link","connect","login","logoutUser","InputComponent","deleteLastSubPath","LoginForm","constructor","props","componentDidMount","blurBackground","location","state","setHocData","signupValues","componentWillUnmount","resetBackground","componentDidUpdate","prevProps","prevState","JSON","stringify","user","Object","keys","length","errMsg","alert","pathname","match","params","history","push","render","okToSubmit","values"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport ValidationHoc from \"../../hoc/validationHoc\";\nimport BlurBackgroundHoc from \"../../hoc/blurBackgroundHoc\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faWindowClose } from \"@fortawesome/free-solid-svg-icons\";\nimport  facebookIcon  from \"../../assets/facebook.png\";\nimport googleIcon  from \"../../assets/google.png\";\nimport { withRouter, Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { login, logoutUser } from \"../../redux/actions\";\nimport InputComponent from \"../../hoc/inputComponent\";\nimport {deleteLastSubPath} from \"../../utils/path-generator\"\nimport \"./auth.scss\";\n// TODO @SONIA\n\nclass LoginForm extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  componentDidMount() {\n    this.props.blurBackground();\n    if (this.props.location.state) {\n      this.props.setHocData({ ...this.props.location.state.signupValues })\n    }\n  }\n  componentWillUnmount() {\n    this.props.resetBackground();\n  }\n\n  async componentDidUpdate(prevProps, prevState) {\n\n    //监听props.user。每改变一下email和password，state和props改变，就会重新渲染。\n    if (JSON.stringify(prevProps.user) !== JSON.stringify(this.props.user)) {\n      if (Object.keys(this.props.user).length !== 0) {\n        if (this.props.user.errMsg) {\n          alert(this.props.user.errMsg);\n          //处理两次失败请求\n          this.props.logoutUser(); //改变redux里的状态，第二次失败请求触发componentdidupdate\n        } else {\n          const {pathname} = this.props.location;\n          if (this.props.match.params[0] === 'home') {\n            this.props.history.push(\"/account/dashboard\");\n          } else {\n            this.props.history.push(deleteLastSubPath(pathname));\n          }\n        }\n      }\n    }\n  }\n\n  render() {\n    const {pathname} = this.props.history.location;\n    return (\n      <div className=\"container\">\n        <div className=\"container--not-blured\">\n          <div className=\"auth-form\">\n            <div className=\"form__header\">\n              <div>\n                Log in\n                <FontAwesomeIcon icon={faWindowClose} className=\"button-close\" \n                  onClick={() => { \n                    this.props.history.push(deleteLastSubPath(pathname))\n                  }} />\n              </div>\n            </div>\n\n            <div className=\"auth-form__content\">\n                <InputComponent {...this.props} title=\"Email\" name=\"email\" placeholder=\"Email\"/>\n                <InputComponent {...this.props} title=\"Password\" name=\"password\" placeholder=\"Password\" type=\"password\" />\n              <Link to=\"\" className=\"blue-link\">Forget password?</Link>\n            </div>\n                \n            <div className=\"bottom-buttons\">\n              <button\n                onClick={async () => {\n                  if (await this.props.okToSubmit()) {\n                    this.props.login(this.props.values);\n                  }\n                }}>\n                Log in\n              </button>\n            </div>\n        \n            <div className=\"seperator-wrapper\">or login with</div>\n\n            <div className=\"bottom-buttons bottom-buttons--social-media\">\n              <button><img src={facebookIcon}/>Facebook</button>\n              <button><img src={googleIcon}/>Google</button>\n            </div>\n          \n            <div className=\"auth-form__bottom-section\">\n              Don't have an account?\n            \n            <button className=\"blue-link\"\n                onClick={() => {\n                  this.props.history.push(\n                    `${deleteLastSubPath(pathname)}/signup`\n                  );\n                }}>\n                Sign up\n            </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default connect(state => ({ user: state.user }), { login, logoutUser })(\n  BlurBackgroundHoc(ValidationHoc(withRouter(LoginForm), ['email', 'password']))\n);\n\n"]},"metadata":{},"sourceType":"module"}