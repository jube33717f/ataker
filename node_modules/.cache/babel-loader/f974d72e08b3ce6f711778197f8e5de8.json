{"ast":null,"code":"'use strict';\n\nclass LRU {\n  constructor(max) {\n    this.max = max;\n    this.size = 0;\n    this.cache = new Map();\n    this._cache = new Map();\n  }\n\n  get(key, options) {\n    let item = this.cache.get(key);\n    const maxAge = options && options.maxAge; // only call Date.now() when necessary\n\n    let now;\n\n    function getNow() {\n      now = now || Date.now();\n      return now;\n    }\n\n    if (item) {\n      // check expired\n      if (item.expired && getNow() > item.expired) {\n        item.expired = 0;\n        item.value = undefined;\n      } else {\n        // update expired in get\n        if (maxAge !== undefined) {\n          const expired = maxAge ? getNow() + maxAge : 0;\n          item.expired = expired;\n        }\n      }\n\n      return item.value;\n    } // try to read from _cache\n\n\n    item = this._cache.get(key);\n\n    if (item) {\n      // check expired\n      if (item.expired && getNow() > item.expired) {\n        item.expired = 0;\n        item.value = undefined;\n      } else {\n        // not expired, save to cache\n        this._update(key, item); // update expired in get\n\n\n        if (maxAge !== undefined) {\n          const expired = maxAge ? getNow() + maxAge : 0;\n          item.expired = expired;\n        }\n      }\n\n      return item.value;\n    }\n  }\n\n  set(key, value, options) {\n    const maxAge = options && options.maxAge;\n    const expired = maxAge ? Date.now() + maxAge : 0;\n    let item = this.cache.get(key);\n\n    if (item) {\n      item.expired = expired;\n      item.value = value;\n    } else {\n      item = {\n        value,\n        expired\n      };\n\n      this._update(key, item);\n    }\n  }\n\n  keys() {\n    const cacheKeys = new Set();\n    const now = Date.now();\n\n    for (const entry of this.cache.entries()) {\n      checkEntry(entry);\n    }\n\n    for (const entry of this._cache.entries()) {\n      checkEntry(entry);\n    }\n\n    function checkEntry(entry) {\n      const key = entry[0];\n      const item = entry[1];\n\n      if (entry[1].value && !entry[1].expired || item.expired >= now) {\n        cacheKeys.add(key);\n      }\n    }\n\n    return Array.from(cacheKeys.keys());\n  }\n\n  _update(key, item) {\n    this.cache.set(key, item);\n    this.size++;\n\n    if (this.size >= this.max) {\n      this.size = 0;\n      this._cache = this.cache;\n      this.cache = new Map();\n    }\n  }\n\n}\n\nmodule.exports = LRU;","map":{"version":3,"sources":["/Users/jubi/fullStack/groupProject/0322/xyz.frontend/node_modules/ylru/index.js"],"names":["LRU","constructor","max","size","cache","Map","_cache","get","key","options","item","maxAge","now","getNow","Date","expired","value","undefined","_update","set","keys","cacheKeys","Set","entry","entries","checkEntry","add","Array","from","module","exports"],"mappings":"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","sourcesContent":["'use strict';\n\nclass LRU {\n  constructor(max) {\n    this.max = max;\n    this.size = 0;\n    this.cache = new Map();\n    this._cache = new Map();\n  }\n\n  get(key, options) {\n    let item = this.cache.get(key);\n    const maxAge = options && options.maxAge;\n    // only call Date.now() when necessary\n    let now;\n    function getNow() {\n      now = now || Date.now();\n      return now;\n    }\n    if (item) {\n      // check expired\n      if (item.expired && getNow() > item.expired) {\n        item.expired = 0;\n        item.value = undefined;\n      } else {\n        // update expired in get\n        if (maxAge !== undefined) {\n          const expired = maxAge ? getNow() + maxAge : 0;\n          item.expired = expired;\n        }\n      }\n      return item.value;\n    }\n\n    // try to read from _cache\n    item = this._cache.get(key);\n    if (item) {\n      // check expired\n      if (item.expired && getNow() > item.expired) {\n        item.expired = 0;\n        item.value = undefined;\n      } else {\n        // not expired, save to cache\n        this._update(key, item);\n        // update expired in get\n        if (maxAge !== undefined) {\n          const expired = maxAge ? getNow() + maxAge : 0;\n          item.expired = expired;\n        }\n      }\n      return item.value;\n    }\n  }\n\n  set(key, value, options) {\n    const maxAge = options && options.maxAge;\n    const expired = maxAge ? Date.now() + maxAge : 0;\n    let item = this.cache.get(key);\n    if (item) {\n      item.expired = expired;\n      item.value = value;\n    } else {\n      item = {\n        value,\n        expired,\n      };\n      this._update(key, item);\n    }\n  }\n\n  keys() {\n    const cacheKeys = new Set();\n    const now = Date.now();\n\n    for (const entry of this.cache.entries()) {\n      checkEntry(entry);\n    }\n\n    for (const entry of this._cache.entries()) {\n      checkEntry(entry);\n    }\n\n    function checkEntry(entry) {\n      const key = entry[0];\n      const item = entry[1];\n      if (entry[1].value && (!entry[1].expired) || item.expired >= now) {\n        cacheKeys.add(key);\n      }\n    }\n\n    return Array.from(cacheKeys.keys());\n  }\n\n  _update(key, item) {\n    this.cache.set(key, item);\n    this.size++;\n    if (this.size >= this.max) {\n      this.size = 0;\n      this._cache = this.cache;\n      this.cache = new Map();\n    }\n  }\n}\n\nmodule.exports = LRU;\n\n"]},"metadata":{},"sourceType":"script"}