{"ast":null,"code":"var _jsxFileName = \"/Users/jubi/fullStack/groupProject/0322/xyz.frontend/src/pages/browse-tasks/browse-tasks-left/browse-tasks-left.js\";\nimport React, { Component } from \"react\";\nimport \"./browse-tasks-left.scss\";\nimport { Route, withRouter, Link } from \"react-router-dom\";\nimport { reqTaskList } from \"../../../api/api\"; // TODO @JUBI\n\nclass BrowseTasksLeft extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: [],\n      currentIndex: -1,\n      newsShow: true //itemShow:false\n      //SONIA：这里所有的数据移到了src/fakeData.js\n\n    };\n    this.setCurrentIndex = this.setCurrentIndex.bind(this);\n    this.refresh = this.refresh.bind(this);\n  }\n\n  setCurrentIndex(event) {\n    // console.log('a')\n    this.setState({\n      currentIndex: parseInt(event.currentTarget.getAttribute('indexc'), 10) // console.log(currentIndex)\n\n    }); // console.log(this.state.currentIndex)\n  }\n\n  refresh() {\n    // console.log('a')\n    this.setState({\n      newsShow: false\n    });\n    document.querySelector('.vertical--scroll').style.magin = \"0\";\n  } //SONIA：下面的获取数据步骤要在监听scroll事件的时候做\n\n\n  async componentDidMount() {\n    try {\n      const result = await reqTaskList();\n\n      if (result.status === 0) {\n        this.setState({\n          data: result.data\n        });\n      }\n    } catch (error) {\n      //SONIA：handle这的error，不然react会报错\n      alert(\"failed to request task list\");\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"task__list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }, this.state.newsShow && React.createElement(\"div\", {\n      onClick: this.refresh,\n      className: \"task__list--newlist--loadmore--frame\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"task__list--newlist--loadmore\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"newlist--loadmore--count\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, \"313 \"), React.createElement(\"span\", {\n      className: \"newlist--loadmore--message\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, \" new tasks\"))), React.createElement(\"div\", {\n      className: \"loaderific--not--loading\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"list vertical--scroll\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, this.state.data.map((item, index) => // SONIA：把下一行原来的<a>换成了div+onclick事件，这样可以通过react router跳转到下个页面\n    //this.state.currentIndex === index ? 'newtask__list--item--open' : ''\n    //   <a key={index} className=\"newtask__list--item newtask__list--item--open\">\n    React.createElement(\"div\", {\n      key: index,\n      className: ['newtask__list--item', 'newtask__list--item--open', this.state.currentIndex === index ? 'newtask__list--item--open--style' : ''].join(' '),\n      indexc: index,\n      onMouseDown: this.setCurrentIndex,\n      onClick: () => {\n        this.props.history.push(`${this.props.match.path}/${item.title.replace(/ /g, \"-\")}-${item.id}`);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"newtask__list--item--header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"newtask__list--item--header--title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, item.title), React.createElement(\"div\", {\n      className: \"newtask__list--item--header--price\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, \"$\", item.price))), React.createElement(\"div\", {\n      className: \"newtask__list--item--body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"avatar__img newtask__list--item--body--avatar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: item.photo,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"newtask__list--item--avatar--online\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"newtask__list--item--avatar--online--detail\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, item.place)), React.createElement(\"div\", {\n      className: \"newtask__list--item--dateat--icon--calendar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"newtask__list--item--dateat--icon--calendar--detail\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, item.dueDate))), React.createElement(\"div\", {\n      className: \"newtask__list--item--footer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"newtask__list--item--footer--status\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, item.status), React.createElement(\"span\", {\n      className: \"newtask__list--item--footer--bids\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, item.offers))))), React.createElement(\"div\", {\n      className: \"newtask__list--loading\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"loaderific--not--loading\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default withRouter(BrowseTasksLeft);","map":{"version":3,"sources":["/Users/jubi/fullStack/groupProject/0322/xyz.frontend/src/pages/browse-tasks/browse-tasks-left/browse-tasks-left.js"],"names":["React","Component","Route","withRouter","Link","reqTaskList","BrowseTasksLeft","constructor","props","state","data","currentIndex","newsShow","setCurrentIndex","bind","refresh","event","setState","parseInt","currentTarget","getAttribute","document","querySelector","style","magin","componentDidMount","result","status","error","alert","render","map","item","index","join","history","push","match","path","title","replace","id","price","photo","place","dueDate","offers"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"./browse-tasks-left.scss\";\nimport { Route, withRouter, Link } from \"react-router-dom\";\nimport { reqTaskList } from \"../../../api/api\";\n\n// TODO @JUBI\nclass BrowseTasksLeft extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: [],\n      currentIndex:-1,\n      newsShow:true,\n      //itemShow:false\n      //SONIA：这里所有的数据移到了src/fakeData.js\n    };\n    this.setCurrentIndex = this.setCurrentIndex.bind(this);\n    this.refresh = this.refresh.bind(this);\n  }\n  setCurrentIndex(event){\n    // console.log('a')\n    this.setState({\n      currentIndex: parseInt(event.currentTarget.getAttribute('indexc'), 10)\n      // console.log(currentIndex)\n    })\n    // console.log(this.state.currentIndex)\n  } \n  refresh(){\n    // console.log('a')\n    this.setState({newsShow:false});\n    document.querySelector('.vertical--scroll').style.magin=\"0\";\n  }\n  //SONIA：下面的获取数据步骤要在监听scroll事件的时候做\n  async componentDidMount() {\n    try {\n      const result = await reqTaskList();\n      if (result.status === 0) {\n        this.setState({ data: result.data });\n      }\n    } catch (error) {\n      //SONIA：handle这的error，不然react会报错\n      alert(\"failed to request task list\");\n    }\n  }\n  render() {\n    return (\n      <div className=\"task__list\">\n        {this.state.newsShow && (<div onClick={this.refresh} className=\"task__list--newlist--loadmore--frame\">\n          <div className=\"task__list--newlist--loadmore\">\n            <span className=\"newlist--loadmore--count\" >313 </span>\n            <span className=\"newlist--loadmore--message\"> new tasks</span>\n          </div>\n        </div>)}\n\n        <div className=\"loaderific--not--loading\"></div>\n\n        <div className=\"list vertical--scroll\">\n          <div className=\"group\">\n            {this.state.data.map((item, index) => (\n              // SONIA：把下一行原来的<a>换成了div+onclick事件，这样可以通过react router跳转到下个页面\n//this.state.currentIndex === index ? 'newtask__list--item--open' : ''\n              //   <a key={index} className=\"newtask__list--item newtask__list--item--open\">\n              \n              <div\n                key={index}\n                className={['newtask__list--item','newtask__list--item--open',this.state.currentIndex === index ? 'newtask__list--item--open--style' : ''].join(' ')}\n                indexc={index}\n                onMouseDown={this.setCurrentIndex}\n                onClick={() => {\n                  this.props.history.push(\n                    `${this.props.match.path}/${item.title.replace(\n                      / /g,\n                      \"-\"\n                    )}-${item.id}`\n                  \n                    \n                  );\n                  \n                }}\n              >\n                <div className=\"newtask__list--item--header\">\n                  <span className=\"newtask__list--item--header--title\">\n                    {item.title}\n                  </span>\n                  <div className=\"newtask__list--item--header--price\">\n                    <span>${item.price}</span>\n                  </div>\n                </div>\n                <div className=\"newtask__list--item--body\">\n                  <div className=\"avatar__img newtask__list--item--body--avatar\">\n                    <img src={item.photo} />\n                  </div>\n                  <div className=\"newtask__list--item--avatar--online\">\n                    <span className=\"newtask__list--item--avatar--online--detail\">\n                      {item.place}\n                    </span>\n                  </div>\n                  <div className=\"newtask__list--item--dateat--icon--calendar\">\n                    <span className=\"newtask__list--item--dateat--icon--calendar--detail\">\n                      {item.dueDate}\n                    </span>\n                  </div>\n                </div>\n                <div className=\"newtask__list--item--footer\">\n                  <span className=\"newtask__list--item--footer--status\">\n                    {item.status}\n                  </span>\n                  <span className=\"newtask__list--item--footer--bids\">\n                    {item.offers}\n                  </span>\n                </div>\n                {/* </a> */}\n              </div>\n            ))}\n          </div>\n\n          <div className=\"newtask__list--loading\">\n            <div className=\"loaderific--not--loading\"></div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\nexport default withRouter(BrowseTasksLeft);\n"]},"metadata":{},"sourceType":"module"}