{"ast":null,"code":"var _jsxFileName = \"/Users/jubi/fullStack/groupProject/0322/xyz.frontend/src/pages/browse-tasks/browse-tasks-right/task-detail/task-detail.js\";\nimport React, { Component } from \"react\";\nimport { withRouter, Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport SideBar from \"./side-bar/side-bar\";\nimport LeftPanel from \"./left-panel/left-panel\";\nimport OfferSection from \"./offer-section/offer-section\";\nimport QuestionSection from \"./question-section/question-section\";\nimport { reqTaskDetail } from \"../../../../api/api\";\nimport { addTaskDetail, addUserRole, clearTaskDetail, reloadTaskDetail } from \"../../../../redux/actions\";\nimport \"./task-detail.scss\"; // TODO @SONIA\n\nclass TaskDetail extends Component {\n  constructor(props) {\n    super(props);\n\n    this.requestTaskData = async () => {\n      const taskId = this.props.match.params.id;\n\n      try {\n        const result = await reqTaskDetail(taskId);\n\n        if (result.status === 200) {\n          this.props.addTaskDetail(result.data);\n        }\n      } catch (error) {\n        alert(\"failed to request task detail\");\n      }\n    };\n\n    this.rightPageRef = React.createRef();\n  }\n\n  async componentDidMount() {\n    await this.requestTaskData();\n    this.getUserRole();\n    this.rightPageRef.current.style.left = \"0px\";\n  }\n\n  async componentDidUpdate(prevProps, prevState) {\n    const taskId = this.props.match.params.id;\n\n    if (prevProps.match.params.id !== this.props.match.params.id || prevProps.taskDetail.taskData.id !== this.props.taskDetail.taskData.id) {\n      await this.requestTaskData();\n      this.getUserRole();\n    }\n\n    if (prevProps.user.email !== this.props.user.email) {\n      this.getUserRole();\n    }\n\n    if (this.props.taskDetail.readyToReload) {\n      await this.requestTaskData();\n      this.props.reloadTaskDetail(false);\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.clearTaskDetail();\n  }\n\n  getUserRole() {\n    const posterEmail = this.props.taskDetail.taskData.taskDetail ? this.props.taskDetail.taskData.taskDetail.posterInfo.email : '';\n    const {\n      offers\n    } = this.props.taskDetail.taskData;\n    const userEmail = this.props.user.email;\n\n    if (userEmail === posterEmail) {\n      this.props.addUserRole(\"poster\");\n    } else if (offers && offers.length !== 0 && offers[0].email === userEmail) {\n      this.props.addUserRole(\"assignee\");\n    } else {\n      this.props.addUserRole(\"\");\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"task-detail\",\n      ref: this.rightPageRef,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"task-detail__left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(LeftPanel, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }), React.createElement(OfferSection, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }), React.createElement(QuestionSection, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"task-detail__right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(SideBar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default connect(state => ({\n  user: state.user,\n  taskDetail: state.taskDetail\n}), {\n  addTaskDetail,\n  addUserRole,\n  clearTaskDetail,\n  reloadTaskDetail\n})(withRouter(TaskDetail));","map":{"version":3,"sources":["/Users/jubi/fullStack/groupProject/0322/xyz.frontend/src/pages/browse-tasks/browse-tasks-right/task-detail/task-detail.js"],"names":["React","Component","withRouter","Link","connect","SideBar","LeftPanel","OfferSection","QuestionSection","reqTaskDetail","addTaskDetail","addUserRole","clearTaskDetail","reloadTaskDetail","TaskDetail","constructor","props","requestTaskData","taskId","match","params","id","result","status","data","error","alert","rightPageRef","createRef","componentDidMount","getUserRole","current","style","left","componentDidUpdate","prevProps","prevState","taskDetail","taskData","user","email","readyToReload","componentWillUnmount","posterEmail","posterInfo","offers","userEmail","length","render","state"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { withRouter, Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport SideBar from \"./side-bar/side-bar\";\nimport LeftPanel from \"./left-panel/left-panel\";\nimport OfferSection from \"./offer-section/offer-section\";\nimport QuestionSection from \"./question-section/question-section\";\nimport { reqTaskDetail } from \"../../../../api/api\";\nimport { addTaskDetail, addUserRole, clearTaskDetail, reloadTaskDetail } from \"../../../../redux/actions\"\nimport \"./task-detail.scss\";\n\n// TODO @SONIA\nclass TaskDetail extends Component {\n  constructor(props) {\n    super(props);\n    this.rightPageRef = React.createRef();\n  }\n\n  async componentDidMount() {\n    await this.requestTaskData();\n    this.getUserRole();\n    this.rightPageRef.current.style.left = \"0px\";\n  }\n\n  async componentDidUpdate(prevProps, prevState) {\n    const taskId = this.props.match.params.id;\n    if (prevProps.match.params.id !== this.props.match.params.id ||\n      prevProps.taskDetail.taskData.id !== this.props.taskDetail.taskData.id) {\n      await this.requestTaskData();\n      this.getUserRole();\n    }\n    if (prevProps.user.email !== this.props.user.email) {\n      this.getUserRole();\n    }\n    if (this.props.taskDetail.readyToReload) {\n      await this.requestTaskData();\n      this.props.reloadTaskDetail(false)\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.clearTaskDetail();\n  }\n\n  requestTaskData = async () => {\n\n    const taskId = this.props.match.params.id;\n    try {\n      const result = await reqTaskDetail(taskId);\n      if (result.status === 200) {\n        this.props.addTaskDetail(result.data)\n      }\n    } catch (error) {\n      alert(\"failed to request task detail\");\n    }\n\n  }\n\n  getUserRole() {\n    const posterEmail = this.props.taskDetail.taskData.taskDetail ? this.props.taskDetail.taskData.taskDetail.posterInfo.email : '';\n    const { offers } = this.props.taskDetail.taskData;\n    const userEmail = this.props.user.email;\n    if (userEmail === posterEmail) {\n      this.props.addUserRole(\"poster\")\n    }\n    else if (offers && offers.length !== 0 && offers[0].email === userEmail) {\n      this.props.addUserRole(\"assignee\")\n    } else {\n      this.props.addUserRole(\"\")\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"task-detail\" ref={this.rightPageRef}>\n        <div className=\"task-detail__left\">\n          <LeftPanel />\n          <OfferSection />\n          <QuestionSection />\n        </div>\n        <div className=\"task-detail__right\">\n          <SideBar />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default connect(state => ({ user: state.user, taskDetail: state.taskDetail }), { addTaskDetail, addUserRole, clearTaskDetail, reloadTaskDetail })(\n  withRouter(TaskDetail)\n);\n"]},"metadata":{},"sourceType":"module"}