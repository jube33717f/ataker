{"ast":null,"code":"var _jsxFileName = \"/Users/jubi/fullStack/groupProject/0322/xyz.frontend/src/pages/browse-tasks/browse-tasks-right/map-box/map-box.js\";\nimport React, { Component } from \"react\";\nimport { GoogleApiWrapper, InfoWindow, Marker, Geocoder } from 'google-maps-react';\nimport CurrentLocation from './map';\nimport markerIcon from \"../../../../assets/markerIcon.png\";\nimport \"./map-box.scss\";\nimport { connect } from 'react-redux';\nimport { reqTaskList } from \"../../../../api/api\";\nimport { changeDistance, changePrice, changeLocation } from '../../redux/actions'; // TODO @JUbi\n// const mapStyles = {\n//   map: {\n//     width: '80%',\n//     height: '100%'\n//   }\n// };\n// const infoStyles = {\n//   info:{\n//     // margin:0 auto,\n//     opacity:'0.85'\n//   }\n// }\n\nexport class MapBox extends Component {\n  constructor(_props) {\n    super(_props);\n\n    this.onMarkerClick = (props, marker, e) => this.setState({\n      selectedPlace: props,\n      activeMarker: marker,\n      showingInfoWindow: true\n    });\n\n    this.onClose = props => {\n      if (this.state.showingInfoWindow) {\n        this.setState({\n          showingInfoWindow: false,\n          activeMarker: null\n        });\n      }\n    };\n\n    this.state = {\n      markers: [false, false, false],\n      showingInfoWindow: false,\n      //Hides or the shows the infoWindow\n      activeMarker: {},\n      //Shows the active marker upon click\n      selectedPlace: {},\n      //Shows the infoWindow to the selected place upon a marker\n      changed: false,\n      zoom: '',\n      newsNum: ''\n    };\n  } //   async componentDidMount() {\n  //   console.log(this.props.)\n  // try {\n  //   const result = await reqTaskList();\n  //   if (result.status === 200) {\n  //     this.props.addTaskList(result.data.taskList);\n  //     this.setState({ newsNum: result.data.taskList.length });\n  //   }\n  // } catch (error) {\n  //   alert(\"failed to request task list\");\n  // }\n  //   }\n\n\n  async componentDidUpdate(prevProps, prevState) {\n    // console.log(prevProps)\n    if (prevProps.locations !== this.props.locations) {\n      console.log(\"changed\");\n      this.forceUpdate();\n    }\n\n    if (prevProps.distance !== this.props.distance) {\n      //calculate zoom \n      console.log('distance', this.props.distance);\n      let l = document.querySelector('.mapbox').clientWidth; //px\n\n      console.log(l);\n      let dipx;\n\n      if (window.screen.deviceXDPI) {\n        dipx = window.screen.deviceXDPI;\n      } else {\n        dipx = 100;\n      }\n\n      console.log(dipx); //l=l*25.4/dipx/1000//m\n      //console.log(l)\n\n      let scale = this.props.distance * 1000 / (l * 25.4 / dipx / 1000);\n      console.log(scale);\n\n      if (scale > 591657550.5) {\n        this.setState({\n          zoom: 1\n        });\n      } else if (scale > 295828775.3) {\n        this.setState({\n          zoom: 2\n        });\n      } else if (scale > 147914387.6) {\n        this.setState({\n          zoom: 3\n        });\n      } else if (scale > 73957193.82) {\n        this.setState({\n          zoom: 4\n        });\n      } else if (scale > 36978596.91) {\n        this.setState({\n          zoom: 5\n        });\n      } else if (scale > 18489298.45) {\n        this.setState({\n          zoom: 6\n        });\n      } else if (scale > 9244649.227) {\n        this.setState({\n          zoom: 7\n        });\n      } else if (scale > 4622324.614) {\n        this.setState({\n          zoom: 8\n        });\n      } else if (scale > 2311162.307) {\n        this.setState({\n          zoom: 9\n        });\n      } else if (scale > 1155581.153) {\n        this.setState({\n          zoom: 10\n        });\n      } else if (scale > 577790.5767) {\n        this.setState({\n          zoom: 11\n        });\n      } else if (scale > 288895.2884) {\n        this.setState({\n          zoom: 12\n        });\n      } else if (scale > 144447.6442) {\n        this.setState({\n          zoom: 13\n        });\n        console.log(this.state.zoom);\n      } else if (scale > 72223.8220) {\n        this.setState({\n          zoom: 14\n        });\n      } else if (scale > 36111.9110) {\n        this.setState({\n          zoom: 15\n        });\n      } else if (scale > 18055.95552) {\n        this.setState({\n          zoom: 16\n        });\n      } else if (scale > 9027.977761) {\n        this.setState({\n          zoom: 17\n        });\n      } else if (scale > 4513.988880) {\n        this.setState({\n          zoom: 18\n        });\n      } else if (scale > 2256.994440) {\n        this.setState({\n          zoom: 19\n        });\n      } else if (scale > 1128.497220) {\n        this.setState({\n          zoom: 20\n        });\n      }\n    }\n  }\n\n  render() {\n    // const infoStyle = Object.assign({}, infoStyles.info);\n    //const {location}=this.props;\n    console.log(this.props.taskList.listData[0]);\n    return React.createElement(\"div\", {\n      className: \"mapbox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(CurrentLocation, Object.assign({\n      centerAroundCurrentLocation: true,\n      google: this.props.google\n    }, this.props, this.state, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }), this.props.locations === '' ? React.createElement(Marker, {\n      name: 'current location',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }) : React.createElement(Marker, {\n      position: this.props.locations,\n      name: 'current location',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }), this.props.taskList.listData.map((item, index) => React.createElement(React.Fragment, null, React.createElement(Marker //place_id={this.props.locations}\n    , {\n      position: {\n        lat: -33.900128,\n        lng: 151.224562\n      },\n      onClick: this.onMarkerClick,\n      name: 'Prenuptial agreement',\n      time: 'Due in 1 day',\n      poster: 'Posted by Piyush S. 13 mins ago',\n      price: '$80',\n      profilephoto: 'https://pbs.twimg.com/profile_images/1036730403514736650/PCRxFiEt_400x400.jpg',\n      icon: markerIcon,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }), React.createElement(InfoWindow, {\n      marker: this.state.activeMarker,\n      visible: this.state.showingInfoWindow,\n      onClose: this.onClose,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"mapbox--infoWindow\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"mapbox--infoWindow--top\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"mapbox--infoWindow--top__img\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: this.state.selectedPlace.profilephoto,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"mapbox--infoWindow--top__earn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, this.state.selectedPlace.price))), React.createElement(\"div\", {\n      className: \"mapbox--infoWindow--bottom\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, this.state.selectedPlace.name), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, this.state.selectedPlace.time), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, this.state.selectedPlace.poster), React.createElement(\"button\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, \"View Task\"))))))));\n  }\n\n} // GoogleApiWrapper({\n//   apiKey: 'AIzaSyDy7fG8VcN_upR7UZ7lC63h7cVbVwYu558'\n// })(MapBox);\n\nfunction mapStateToProps(state) {\n  return {\n    locations: state.locations.locations,\n    distance: state.distance.distance,\n    price: state.price.price,\n    taskList: state.taskList\n  };\n}\n\nGoogleApiWrapper({\n  apiKey: 'AIzaSyDy7fG8VcN_upR7UZ7lC63h7cVbVwYu558'\n})(MapBox);\nexport default connect(mapStateToProps, {\n  changeDistance,\n  changePrice,\n  changeLocation\n})(MapBox); // export default","map":{"version":3,"sources":["/Users/jubi/fullStack/groupProject/0322/xyz.frontend/src/pages/browse-tasks/browse-tasks-right/map-box/map-box.js"],"names":["React","Component","GoogleApiWrapper","InfoWindow","Marker","Geocoder","CurrentLocation","markerIcon","connect","reqTaskList","changeDistance","changePrice","changeLocation","MapBox","constructor","props","onMarkerClick","marker","e","setState","selectedPlace","activeMarker","showingInfoWindow","onClose","state","markers","changed","zoom","newsNum","componentDidUpdate","prevProps","prevState","locations","console","log","forceUpdate","distance","l","document","querySelector","clientWidth","dipx","window","screen","deviceXDPI","scale","render","taskList","listData","google","map","item","index","lat","lng","profilephoto","price","name","time","poster","mapStateToProps","apiKey"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { GoogleApiWrapper, InfoWindow, Marker,Geocoder  } from 'google-maps-react';\nimport CurrentLocation from './map';\nimport markerIcon  from \"../../../../assets/markerIcon.png\";\nimport \"./map-box.scss\";\nimport { connect } from 'react-redux';\nimport { reqTaskList } from \"../../../../api/api\";\nimport { changeDistance,changePrice,changeLocation } from '../../redux/actions'\n// TODO @JUbi\n// const mapStyles = {\n//   map: {\n    \n//     width: '80%',\n//     height: '100%'\n//   }\n// };\n// const infoStyles = {\n//   info:{\n//     // margin:0 auto,\n    \n//     opacity:'0.85'\n//   }\n// }\n\nexport class MapBox extends Component {\n  constructor(props){\n      super(props);\n      this.state = {\n        markers:[false,false,false],\n        showingInfoWindow: false,  //Hides or the shows the infoWindow\n        activeMarker: {},          //Shows the active marker upon click\n        selectedPlace: {} ,         //Shows the infoWindow to the selected place upon a marker\n        changed:false,\n        zoom:'',\n        newsNum:'',\n    };\n  }\n//   async componentDidMount() {\n    //   console.log(this.props.)\n    // try {\n    //   const result = await reqTaskList();\n    //   if (result.status === 200) {\n    //     this.props.addTaskList(result.data.taskList);\n    //     this.setState({ newsNum: result.data.taskList.length });\n    //   }\n    // } catch (error) {\n    //   alert(\"failed to request task list\");\n    // }\n//   }\n  async componentDidUpdate(prevProps, prevState){\n    // console.log(prevProps)\n    if(prevProps.locations!==this.props.locations){\n        console.log(\"changed\")\n        this.forceUpdate();\n    }\n    if(prevProps.distance!==this.props.distance){//calculate zoom \n        console.log('distance',this.props.distance)\n        let l=document.querySelector('.mapbox').clientWidth;//px\n        console.log(l)\n        let dipx;\n        if(window.screen.deviceXDPI){\n            dipx=window.screen.deviceXDPI;\n        }else{\n            dipx=100;\n        }\n        \n        console.log(dipx)\n        //l=l*25.4/dipx/1000//m\n        //console.log(l)\n        let scale=this.props.distance*1000/(l*25.4/dipx/1000);\n        console.log(scale)\n        if(scale>591657550.5){\n            this.setState({zoom:1});\n        }else if(scale>295828775.3){\n            this.setState({zoom:2});\n        }else if(scale>147914387.6){\n            this.setState({zoom:3});\n        }else if(scale>73957193.82){\n            this.setState({zoom:4});\n        }else if(scale>36978596.91){\n            this.setState({zoom:5});\n        }else if(scale>18489298.45){\n            this.setState({zoom:6});\n        }else if(scale>9244649.227){\n            this.setState({zoom:7});\n        }else if(scale>4622324.614){\n            this.setState({zoom:8});\n        }else if(scale>2311162.307){\n            this.setState({zoom:9});\n        }else if(scale>1155581.153){\n            this.setState({zoom:10});\n        }else if(scale>577790.5767){\n            this.setState({zoom:11});\n        }else if(scale>288895.2884){\n            this.setState({zoom:12});\n        }else if(scale>144447.6442){\n            this.setState({zoom:13});\n            console.log(this.state.zoom)\n        }else if(scale>72223.8220){\n            this.setState({zoom:14});\n        }else if(scale>36111.9110){\n            this.setState({zoom:15});\n        }else if(scale>18055.95552){\n            this.setState({zoom:16});\n        }else if(scale>9027.977761){\n            this.setState({zoom:17});\n        }else if(scale>4513.988880){\n            this.setState({zoom:18});\n        }else if(scale>2256.994440){\n            this.setState({zoom:19});\n        }else if(scale>1128.497220){\n            this.setState({zoom:20});\n        }\n\n\n      }\n\n  }\n  onMarkerClick = (props, marker, e) =>\n  this.setState({\n    selectedPlace: props,\n    activeMarker: marker,\n    showingInfoWindow: true\n  });\n\n  onClose = props => {\n    if (this.state.showingInfoWindow) {\n      this.setState({\n        showingInfoWindow: false,\n        activeMarker: null\n      });\n    }\n  };\n  \n  render() {\n    // const infoStyle = Object.assign({}, infoStyles.info);\n    //const {location}=this.props;\n\n    console.log(this.props.taskList.listData[0])\n    \n    return (\n      <div className=\"mapbox\">\n        <CurrentLocation\n           \n          centerAroundCurrentLocation\n          google={this.props.google}\n          {...this.props }\n          {...this.state}\n          \n        >\n          {/* <Marker  address={this.props.locations} name={'current location'} /> */}\n         \n          {this.props.locations===''?<Marker  name={'current location'} />:<Marker  position={this.props.locations} name={'current location'} />}\n          {/* {this.props.taskList.listData.sort((a, b) => Date.parse(b.postDate) - Date.parse(a.postDate)).map((item, index) =>()} */}\n          {this.props.taskList.listData.map((item, index) => (\n<>\n              <Marker\n              \n              //place_id={this.props.locations}\n              position={{lat: -33.900128, lng:  151.224562}}\n              onClick={this.onMarkerClick}\n              name={'Prenuptial agreement'} \n              time={'Due in 1 day'}\n              poster={'Posted by Piyush S. 13 mins ago'}\n              price={'$80'}\n              profilephoto={'https://pbs.twimg.com/profile_images/1036730403514736650/PCRxFiEt_400x400.jpg'}\n              icon={markerIcon}\n                />\n          <InfoWindow\n            marker={this.state.activeMarker}\n            visible={this.state.showingInfoWindow}\n            onClose={this.onClose}\n          >\n            \n            <div  className=\"mapbox--infoWindow\">\n              <div className=\"mapbox--infoWindow--top\">\n                <div className=\"mapbox--infoWindow--top__img\">\n                  <img src={this.state.selectedPlace.profilephoto}/>\n                </div>\n                <div className=\"mapbox--infoWindow--top__earn\">\n                <span>{this.state.selectedPlace.price}</span>\n                </div>\n              </div>\n              <div className=\"mapbox--infoWindow--bottom\">\n                <h4>{this.state.selectedPlace.name}</h4>\n                <p>{this.state.selectedPlace.time}</p>\n                <span>{this.state.selectedPlace.poster}</span>\n                <button>View Task</button>\n              </div>\n            </div>\n          </InfoWindow>\n          \n          \n</>\n              \n            ))}\n          {/* \n          <InfoWindow\n            marker={this.state.activeMarker}\n            visible={this.state.showingInfoWindow}\n            onClose={this.onClose}\n          >\n            \n            <div  className=\"mapbox--infoWindow\">\n              <div className=\"mapbox--infoWindow--top\">\n                <div className=\"mapbox--infoWindow--top__img\">\n                  <img src={this.state.selectedPlace.profilephoto}/>\n                </div>\n                <div className=\"mapbox--infoWindow--top__earn\">\n                <span>{this.state.selectedPlace.price}</span>\n                </div>\n              </div>\n              <div className=\"mapbox--infoWindow--bottom\">\n                <h4>{this.state.selectedPlace.name}</h4>\n                <p>{this.state.selectedPlace.time}</p>\n                <span>{this.state.selectedPlace.poster}</span>\n                <button>View Task</button>\n              </div>\n            </div>\n          </InfoWindow> */}\n          \n          {/* <Marker\n              position={{ lat: -33.900128, lng:  151.224562 }}\n              onClick={this.onMarkerClick}\n              name={'Wall mount 65 inch TV'} \n              price={'$50'}\n              time={'Due in 6 hours'}\n              poster={'post by Purushi,21 hours ago'}\n              profilephoto={'https://pbs.twimg.com/media/Dyg-PPzXcAAY5Wv?format=jpg&name=small'}\n              icon={markerIcon}\n          />\n          <InfoWindow\n            marker={this.state.activeMarker}\n            visible={this.state.showingInfoWindow}\n            onClose={this.onClose}\n          >\n            \n            <div  className=\"mapbox--infoWindow\">\n              <div className=\"mapbox--infoWindow--top\">\n                <div className=\"mapbox--infoWindow--top__img\">\n                  <img src={this.state.selectedPlace.profilephoto}/>\n                </div>\n                <div className=\"mapbox--infoWindow--top__earn\">\n                <span>{this.state.selectedPlace.price}</span>\n                </div>\n              </div>\n              <div className=\"mapbox--infoWindow--bottom\">\n                <h4>{this.state.selectedPlace.name}</h4>\n                <p>{this.state.selectedPlace.time}</p>\n                <span>{this.state.selectedPlace.poster}</span>\n                <button>View Task</button>\n              </div>\n            </div>\n          </InfoWindow> */}\n          \n          {/* <Marker\n              className=\"mapbox__maker\"\n              //address={[{long_name:\"Kensington\",short_name:\"Kensington\"},{long_name:\"Randwick City Council\",short_name:\"Randwick\"},{long_name:\"New South Wales\",short_name:\"NSW\"},{long_name:\"Australia\",short_name:\"AU\"},{long_name:\"2033\",short_name:\"2033\"}]}\n              position={{ lat: -33.912605, lng:  151.235999 }}\n              onClick={this.onMarkerClick}\n              name={'Tree looper with tree mulcher'} \n              price={'$140'}\n              time={'Due 12 hours ago'}\n              poster={'post by papa H,21 hours ago'}\n              profilephoto={'https://pbs.twimg.com/media/Dyg6-4xWoAEUNut?format=jpg&name=small'}\n              icon={markerIcon}\n          />\n          \n          <InfoWindow\n            \n            marker={this.state.activeMarker}\n            visible={this.state.showingInfoWindow}\n            onClose={this.onClose}\n          >\n            <div  className=\"mapbox--infoWindow\">\n              <div className=\"mapbox--infoWindow--top\">\n                <div className=\"mapbox--infoWindow--top__img\">\n                  <img src={this.state.selectedPlace.profilephoto}/>\n                </div>\n                <div className=\"mapbox--infoWindow--top__earn\"><p>EARN</p><span>{this.state.selectedPlace.price}</span></div>\n              </div>\n              <div className=\"mapbox--infoWindow--bottom\">\n                <h4>{this.state.selectedPlace.name}</h4>\n                <p>{this.state.selectedPlace.time}</p>\n                <span>{this.state.selectedPlace.poster}</span>\n                <button>View Task</button>\n                </div>\n            </div>\n          </InfoWindow> */}\n        </CurrentLocation>\n        \n        \n      </div>\n    );\n  }\n}\n\n// GoogleApiWrapper({\n//   apiKey: 'AIzaSyDy7fG8VcN_upR7UZ7lC63h7cVbVwYu558'\n// })(MapBox);\n\nfunction mapStateToProps(state) {\n    return {\n      locations: state.locations.locations,\n      distance: state.distance.distance,\n      price: state.price.price,\n      taskList: state.taskList\n    }\n}\n  \nGoogleApiWrapper({\n    apiKey: 'AIzaSyDy7fG8VcN_upR7UZ7lC63h7cVbVwYu558'\n})(MapBox);\nexport default connect(mapStateToProps, {\n    changeDistance,changePrice,changeLocation\n})(MapBox);\n\n// export default "]},"metadata":{},"sourceType":"module"}