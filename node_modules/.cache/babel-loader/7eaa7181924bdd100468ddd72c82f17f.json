{"ast":null,"code":"var _jsxFileName = \"/Users/jubi/fullStack/groupProject/0322/xyz.frontend/src/pages/make-an-offer/make-an-offer.js\";\nimport React, { Component } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport BlurBackgroundHoc from \"../../hoc/blurBackgroundHoc\";\nimport ValidationHoc from \"../../hoc/validationHoc\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faWindowClose } from \"@fortawesome/free-solid-svg-icons\";\nimport PersonalInfoCheck from \"./subpages/personal-info-check/personal-info-check\";\nimport PriceStatement from \"./subpages/price-statement\";\nimport OfferPreview from \"./subpages/offer-preview\";\nimport IntroMessage from \"./subpages/intro-message\";\nimport { reqUserInfo } from \"../../api/api\";\nimport { checkUser } from \"../../redux/actions\";\nimport \"./make-an-offer.scss\"; // TODO @SONIA\n\nclass MakeAnOffer extends Component {\n  constructor(props) {\n    super(props);\n\n    this.updateValidFields = userInfo => {\n      let validFields = [];\n\n      if (Object.keys(userInfo).length > 0) {\n        userInfo.photo && validFields.push('photo');\n        Object.keys(userInfo.bankDetail).length > 0 && validFields.push('bankDetail');\n        Object.keys(userInfo.billingAddr).length > 0 && validFields.push('billingAddr');\n        userInfo.dateOfBirth && validFields.push('dateOfBirth');\n        userInfo.mobileNumber && validFields.push('mobileNumber');\n      }\n\n      return validFields;\n    };\n\n    this.state = {\n      pageNum: 0,\n      pageMovementDirection: ''\n    };\n  }\n\n  async componentDidMount() {\n    this.props.blurBackground();\n    let validFields = [];\n\n    try {\n      const result = await reqUserInfo(this.props.user.email);\n\n      if (result.status === 0) {\n        validFields = this.updateValidFields(result.data);\n      } else {\n        alert(\"User does not exist in fakeData.js!\");\n      }\n    } catch (error) {\n      alert(\"failed to make a request!\");\n    }\n\n    if (validFields.length === 5) {\n      this.setState({\n        pageNum: 2\n      });\n    } else {\n      this.setState({\n        pageNum: 1\n      });\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (JSON.stringify(prevProps) !== JSON.stringify(this.props)) {\n      this.setState({\n        pageNum: this.props.user.readyToBid ? 2 : 1\n      });\n    }\n\n    if (JSON.stringify(prevState) !== JSON.stringify(this.state)) {\n      if (this.props.user.readyToBid && this.state.pageNum === 1) {\n        this.setState({\n          pageNum: 2\n        });\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.resetBackground();\n  }\n\n  render() {\n    let path = this.props.history.location.pathname;\n    return React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container--not-blured\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"offer-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form__header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, this.state.pageNum === 1 && 'To start making money', this.state.pageNum === 2 && 'Make an Offer', this.state.pageNum === 3 && 'Make an Offer', this.state.pageNum === 4 && 'Preview Offer', React.createElement(FontAwesomeIcon, {\n      icon: faWindowClose,\n      className: \"button-close\",\n      onClick: () => {\n        this.props.history.goBack();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }))), this.state.pageNum === 1 && React.createElement(\"div\", {\n      className: `form__content ${this.state.pageMovementDirection}`,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, React.createElement(PersonalInfoCheck, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    })), this.state.pageNum === 2 && React.createElement(\"div\", {\n      className: `form__content ${this.state.pageMovementDirection}`,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(PriceStatement, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    })), this.state.pageNum === 3 && React.createElement(\"div\", {\n      className: `form__content ${this.state.pageMovementDirection}`,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(IntroMessage, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    })), this.state.pageNum === 4 && React.createElement(\"div\", {\n      className: `form__content ${this.state.pageMovementDirection}`,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(OfferPreview, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    })), this.state.pageNum !== 1 && React.createElement(\"div\", {\n      className: \"bottom-buttons\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, this.state.pageNum > 2 && React.createElement(\"button\", {\n      onClick: () => {\n        this.setState({\n          pageNum: this.state.pageNum - 1,\n          pageMovementDirection: 'backward-movement'\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, \" Before \"), this.state.pageNum < 4 ? React.createElement(\"button\", {\n      onClick: () => {\n        this.setState({\n          pageNum: this.state.pageNum + 1,\n          pageMovementDirection: 'forward-movement'\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, \" Next \") : React.createElement(\"button\", {\n      onClick: async () => {\n        alert('succeeded to submit form!');\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, \" Submit offer \")))));\n  }\n\n}\n\nexport default connect(state => ({\n  user: state.user\n}), {\n  checkUser\n})(withRouter(BlurBackgroundHoc(MakeAnOffer)));","map":{"version":3,"sources":["/Users/jubi/fullStack/groupProject/0322/xyz.frontend/src/pages/make-an-offer/make-an-offer.js"],"names":["React","Component","withRouter","connect","BlurBackgroundHoc","ValidationHoc","FontAwesomeIcon","faWindowClose","PersonalInfoCheck","PriceStatement","OfferPreview","IntroMessage","reqUserInfo","checkUser","MakeAnOffer","constructor","props","updateValidFields","userInfo","validFields","Object","keys","length","photo","push","bankDetail","billingAddr","dateOfBirth","mobileNumber","state","pageNum","pageMovementDirection","componentDidMount","blurBackground","result","user","email","status","data","alert","error","setState","componentDidUpdate","prevProps","prevState","JSON","stringify","readyToBid","componentWillUnmount","resetBackground","render","path","history","location","pathname","goBack"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport BlurBackgroundHoc from \"../../hoc/blurBackgroundHoc\";\nimport ValidationHoc from \"../../hoc/validationHoc\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport { faWindowClose } from \"@fortawesome/free-solid-svg-icons\";\nimport PersonalInfoCheck from \"./subpages/personal-info-check/personal-info-check\";\nimport PriceStatement from \"./subpages/price-statement\";\nimport OfferPreview from \"./subpages/offer-preview\";\nimport IntroMessage from \"./subpages/intro-message\";\nimport { reqUserInfo } from \"../../api/api\"\nimport { checkUser } from \"../../redux/actions\"\nimport \"./make-an-offer.scss\"\n// TODO @SONIA\nclass MakeAnOffer extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            pageNum: 0,\n            pageMovementDirection: ''\n        }\n    }\n\n    updateValidFields = (userInfo) => {\n        let validFields = [];\n        if (Object.keys(userInfo).length > 0) {\n            userInfo.photo && validFields.push('photo');\n            Object.keys(userInfo.bankDetail).length > 0 && validFields.push('bankDetail');\n            Object.keys(userInfo.billingAddr).length > 0 && validFields.push('billingAddr');\n            userInfo.dateOfBirth && validFields.push('dateOfBirth');\n            userInfo.mobileNumber && validFields.push('mobileNumber')\n        }\n        return validFields;\n    }\n\n    async componentDidMount() {\n        this.props.blurBackground();\n        let validFields = [];\n        try {\n            const result = await reqUserInfo(this.props.user.email);\n            if (result.status === 0) {\n                validFields = this.updateValidFields(result.data);\n            } else {\n                alert(\"User does not exist in fakeData.js!\");\n            }\n        } catch (error) {\n            alert(\"failed to make a request!\");\n        }\n        if (validFields.length === 5) {\n            this.setState({ pageNum: 2 })\n        } else {\n            this.setState({ pageNum: 1 })\n        }\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if (JSON.stringify(prevProps) !== JSON.stringify(this.props)) {\n            this.setState({ pageNum: this.props.user.readyToBid ? 2 : 1 })\n        }\n        if (JSON.stringify(prevState) !== JSON.stringify(this.state)) {\n            if (this.props.user.readyToBid && this.state.pageNum === 1) {\n                this.setState({ pageNum: 2 })\n            }\n        }\n    }\n    componentWillUnmount() {\n        this.props.resetBackground();\n    }\n    render() {\n        let path = this.props.history.location.pathname;\n        return (\n            <div className=\"container\">\n                <div className=\"container--not-blured\">\n                    <div className=\"offer-form\">\n                        <div className=\"form__header\">\n                            <div>\n                                {this.state.pageNum === 1 && 'To start making money'}\n                                {this.state.pageNum === 2 && 'Make an Offer'}\n                                {this.state.pageNum === 3 && 'Make an Offer'}\n                                {this.state.pageNum === 4 && 'Preview Offer'}\n                                <FontAwesomeIcon icon={faWindowClose} className=\"button-close\" onClick={() => { this.props.history.goBack() }} />\n                            </div>\n                        </div>\n\n                        {/* 不能把 <div className={`form__content ${this.state.pageMovementDirection}`}></div> 放外面，不然只会重新渲染里面的东西 */}\n                        {this.state.pageNum === 1 &&\n                            <div className={`form__content ${this.state.pageMovementDirection}`}><PersonalInfoCheck /></div>}\n                        {this.state.pageNum === 2 &&\n                            <div className={`form__content ${this.state.pageMovementDirection}`}><PriceStatement /></div>}\n                        {this.state.pageNum === 3 &&\n                            <div className={`form__content ${this.state.pageMovementDirection}`}><IntroMessage /></div>}\n                        {this.state.pageNum === 4 &&\n                            <div className={`form__content ${this.state.pageMovementDirection}`}><OfferPreview /></div>}\n\n\n                        {this.state.pageNum !== 1 &&\n                            <div className=\"bottom-buttons\">\n                                {this.state.pageNum > 2\n                                    &&\n                                    <button onClick={() => {\n                                        this.setState({ pageNum: this.state.pageNum - 1, pageMovementDirection: 'backward-movement' });\n                                    }}> Before </button>\n                                }\n                                {this.state.pageNum < 4\n                                    ?\n                                    <button onClick={() => {\n                                        this.setState({ pageNum: this.state.pageNum + 1, pageMovementDirection: 'forward-movement' });\n                                    }}> Next </button>\n                                    :\n                                    <button onClick={async () => {\n                                        alert('succeeded to submit form!')\n                                    }}> Submit offer </button>\n                                }\n                            </div>\n                        }\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\nexport default connect(state => ({ user: state.user }), { checkUser })(withRouter(BlurBackgroundHoc(MakeAnOffer)));"]},"metadata":{},"sourceType":"module"}