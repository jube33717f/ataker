{"ast":null,"code":"var _jsxFileName = \"/Users/jubi/fullStack/groupProject/0322/xyz.frontend/src/pages/make-an-offer/subpages/personal-info-check/personal-info-check.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport \"./personal-info-check.scss\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faArrowRight, faUpload } from \"@fortawesome/free-solid-svg-icons\";\nimport BankDetail from \"./subpages/bank-detail\";\nimport BillingAddress from \"./subpages/billing-address\";\nimport DateOfBirth from \"./subpages/date-of-birth\";\nimport UploadPhoto from \"./subpages/upload-photo\";\nimport MobileNumber from \"./subpages/mobile-number\";\nimport { reqUserInfo } from \"../../../../api/api\";\nimport { checkUser } from \"../../../../redux/actions\"; // TODO @SONIA\n\nclass PersonalInfoCheck extends Component {\n  constructor() {\n    super();\n\n    this.updateValidFields = userInfo => {\n      let validFields = [];\n\n      if (Object.keys(userInfo).length > 0) {\n        userInfo.photo && validFields.push('photo');\n        Object.keys(userInfo.bankDetail).length > 0 && validFields.push('bankDetail');\n        Object.keys(userInfo.billingAddr).length > 0 && validFields.push('billingAddr');\n        userInfo.dateOfBirth && validFields.push('dateOfBirth');\n        userInfo.mobileNumber && validFields.push('mobileNumber');\n      }\n\n      this.setState({\n        validFields\n      });\n    };\n\n    this.state = {\n      selectedFieldNum: 0,\n      userInfo: '',\n      validFields: '',\n      fieldsToComplete: []\n    };\n  }\n\n  async componentDidMount() {\n    try {\n      const result = await reqUserInfo(this.props.user.email);\n\n      if (result.status === 0) {\n        this.setState({\n          userInfo: result.data\n        });\n        this.updateValidFields(result.data);\n      } else {\n        alert(\"User does not exist in fakeData.js!\");\n      }\n    } catch (error) {\n      alert(\"failed to make a request!\");\n    }\n  }\n\n  async componentDidUpdate(prevProps, prevState) {\n    // update userInfo everytime changing page.\n    if (this.state.selectedFieldNum !== prevState.selectedFieldNum) {\n      const result = await reqUserInfo(this.props.user.email);\n\n      if (result.status === 0) {\n        this.setState({\n          userInfo: result.data\n        });\n        this.updateValidFields(result.data);\n      } else {\n        alert(\"User does not exist in fakeData.js!\");\n      }\n\n      const fieldsToComplete = ['photo', 'bankDetail', 'billingAddr', 'dateOfBirth', 'mobileNumber'].filter(field => !this.state.validFields.includes(field));\n      this.setState({\n        fieldsToComplete\n      }); // alert('changed page!')\n    }\n  }\n\n  render() {\n    const {\n      selectedFieldNum\n    } = this.state;\n    return React.createElement(\"div\", {\n      className: \"info-check-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, selectedFieldNum === 0 && React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, \"Upload a Profile Picture\"), React.createElement(\"div\", {\n      className: `info-check-form__item ${this.state.fieldsToComplete.includes('photo') && 'info-check-form__item--error'}`,\n      onClick: () => this.setState({\n        selectedFieldNum: 1\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: `form-tick ${this.state.validFields.includes('photo') && \"form-tick-on\"}`,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, \"Upload your photo\")), React.createElement(FontAwesomeIcon, {\n      icon: faArrowRight,\n      className: \"icon__arrow-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }))), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \"Provide your bank account details\"), React.createElement(\"div\", {\n      className: `info-check-form__item ${this.state.fieldsToComplete.includes('bankDetail') && 'info-check-form__item--error'}`,\n      onClick: () => this.setState({\n        selectedFieldNum: 2\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: `form-tick ${this.state.validFields.includes('bankDetail') && \"form-tick-on\"}`,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \"Enter your bank details\")), React.createElement(FontAwesomeIcon, {\n      icon: faArrowRight,\n      className: \"icon__arrow-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }))), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, \"Provide a Billing Address\"), React.createElement(\"div\", {\n      className: `info-check-form__item ${this.state.fieldsToComplete.includes('billingAddr') && 'info-check-form__item--error'}`,\n      onClick: () => this.setState({\n        selectedFieldNum: 3\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: `form-tick ${this.state.validFields.includes('billingAddr') && \"form-tick-on\"}`,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, \"Enter your billing address\")), React.createElement(FontAwesomeIcon, {\n      icon: faArrowRight,\n      className: \"icon__arrow-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }))), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, \"Provide a Date of Birth\"), React.createElement(\"div\", {\n      className: `info-check-form__item ${this.state.fieldsToComplete.includes('dateOfBirth') && 'info-check-form__item--error'}`,\n      onClick: () => this.setState({\n        selectedFieldNum: 4\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: `form-tick ${this.state.validFields.includes('dateOfBirth') && \"form-tick-on\"}`,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, \"Enter your date of birth\")), React.createElement(FontAwesomeIcon, {\n      icon: faArrowRight,\n      className: \"icon__arrow-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }))), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"Provide a Mobile Number\"), React.createElement(\"div\", {\n      className: `info-check-form__item ${this.state.fieldsToComplete.includes('mobileNumber') && 'info-check-form__item--error'}`,\n      onClick: () => this.setState({\n        selectedFieldNum: 5\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: `form-tick ${this.state.validFields.includes('mobileNumber') && \"form-tick-on\"}`,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, \"Enter your mobile number\")), React.createElement(FontAwesomeIcon, {\n      icon: faArrowRight,\n      className: \"icon__arrow-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    })))), selectedFieldNum === 1 && React.createElement(UploadPhoto, {\n      userData: this.state.userInfo.photo,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }), selectedFieldNum === 2 && React.createElement(BankDetail, {\n      userData: this.state.userInfo.bankDetail,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }), selectedFieldNum === 3 && React.createElement(BillingAddress, {\n      userData: this.state.userInfo.billingAddr,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }), selectedFieldNum === 4 && React.createElement(DateOfBirth, {\n      userData: this.state.userInfo.dateOfBirth,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }), selectedFieldNum === 5 && React.createElement(MobileNumber, {\n      userData: this.state.userInfo.mobileNumber,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"bottom-buttons\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, selectedFieldNum === 0 ? React.createElement(\"button\", {\n      onClick: () => {\n        if (this.state.validFields && this.state.validFields.length === 5) {\n          this.props.checkUser();\n        } else {\n          //在相应的field显示提示信息\n          const fieldsToComplete = ['photo', 'bankDetail', 'billingAddr', 'dateOfBirth', 'mobileNumber'].filter(field => !this.state.validFields.includes(field));\n          this.setState({\n            fieldsToComplete\n          });\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, \" Next \") : React.createElement(\"button\", {\n      onClick: async () => {\n        this.setState({\n          selectedFieldNum: 0\n        });\n        const result = await reqUserInfo(this.props.user.email);\n\n        if (result.status === 0) {\n          this.setState({\n            userInfo: result.data\n          });\n          this.updateValidFields(result.data);\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, \" Before \")));\n  }\n\n}\n\nexport default connect(state => ({\n  user: state.user\n}), {\n  checkUser\n})(PersonalInfoCheck);","map":{"version":3,"sources":["/Users/jubi/fullStack/groupProject/0322/xyz.frontend/src/pages/make-an-offer/subpages/personal-info-check/personal-info-check.js"],"names":["React","Component","connect","FontAwesomeIcon","faArrowRight","faUpload","BankDetail","BillingAddress","DateOfBirth","UploadPhoto","MobileNumber","reqUserInfo","checkUser","PersonalInfoCheck","constructor","updateValidFields","userInfo","validFields","Object","keys","length","photo","push","bankDetail","billingAddr","dateOfBirth","mobileNumber","setState","state","selectedFieldNum","fieldsToComplete","componentDidMount","result","props","user","email","status","data","alert","error","componentDidUpdate","prevProps","prevState","filter","field","includes","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport \"./personal-info-check.scss\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faArrowRight, faUpload } from \"@fortawesome/free-solid-svg-icons\";\nimport BankDetail from \"./subpages/bank-detail\";\nimport BillingAddress from \"./subpages/billing-address\";\nimport DateOfBirth from \"./subpages/date-of-birth\";\nimport UploadPhoto from \"./subpages/upload-photo\";\nimport MobileNumber from \"./subpages/mobile-number\";\nimport { reqUserInfo } from \"../../../../api/api\";\nimport { checkUser } from \"../../../../redux/actions\"\n// TODO @SONIA\n\nclass PersonalInfoCheck extends Component {\n    constructor() {\n        super();\n        this.state = {\n            selectedFieldNum: 0,\n            userInfo: '',\n            validFields: '',\n            fieldsToComplete: []\n        }\n    }\n\n    async componentDidMount() {\n        try {\n            const result = await reqUserInfo(this.props.user.email);\n            if (result.status === 0) {\n                this.setState({ userInfo: result.data });\n                this.updateValidFields(result.data);\n            } else {\n                alert(\"User does not exist in fakeData.js!\");\n            }\n        } catch (error) {\n            alert(\"failed to make a request!\");\n        }\n    }\n\n    updateValidFields = (userInfo) => {\n        let validFields = [];\n        if (Object.keys(userInfo).length > 0) {\n            userInfo.photo && validFields.push('photo');\n            Object.keys(userInfo.bankDetail).length > 0 && validFields.push('bankDetail');\n            Object.keys(userInfo.billingAddr).length > 0 && validFields.push('billingAddr');\n            userInfo.dateOfBirth && validFields.push('dateOfBirth');\n            userInfo.mobileNumber && validFields.push('mobileNumber')\n        }\n\n        this.setState({ validFields });\n    }\n\n    async componentDidUpdate(prevProps, prevState) {\n        // update userInfo everytime changing page.\n        if (this.state.selectedFieldNum !== prevState.selectedFieldNum) {\n            const result = await reqUserInfo(this.props.user.email);\n            if (result.status === 0) {\n                this.setState({ userInfo: result.data });\n                this.updateValidFields(result.data);\n            } else {\n                alert(\"User does not exist in fakeData.js!\");\n            }\n            const fieldsToComplete = ['photo', 'bankDetail', 'billingAddr', 'dateOfBirth', 'mobileNumber'].filter(field => !this.state.validFields.includes(field))\n            this.setState({ fieldsToComplete });\n            // alert('changed page!')\n        }\n    }\n    render() {\n        const { selectedFieldNum } = this.state;\n\n\n        return (\n            <div className=\"info-check-form\">\n                {selectedFieldNum === 0 &&\n                    <ul>\n                        <li>\n                            <label>Upload a Profile Picture</label>\n                            <div className={`info-check-form__item ${this.state.fieldsToComplete.includes('photo') && 'info-check-form__item--error'}`}\n                                onClick={() => this.setState({ selectedFieldNum: 1 })}>\n                                <div>\n                                    <div className={`form-tick ${this.state.validFields.includes('photo') && \"form-tick-on\"}`}></div>\n                                    <label>Upload your photo</label>\n                                </div>\n                                <FontAwesomeIcon icon={faArrowRight} className=\"icon__arrow-right\" />\n                            </div>\n                        </li>\n                        <li>\n                            <label>Provide your bank account details</label>\n                            <div className={`info-check-form__item ${this.state.fieldsToComplete.includes('bankDetail') && 'info-check-form__item--error'}`}\n                                onClick={() => this.setState({ selectedFieldNum: 2 })}>\n                                <div>\n                                    <div className={`form-tick ${this.state.validFields.includes('bankDetail') && \"form-tick-on\"}`}></div>\n                                    <label>Enter your bank details</label>\n                                </div>\n                                <FontAwesomeIcon icon={faArrowRight} className=\"icon__arrow-right\" />\n                            </div>\n                        </li>\n                        <li>\n                            <label>Provide a Billing Address</label>\n                            <div className={`info-check-form__item ${this.state.fieldsToComplete.includes('billingAddr') && 'info-check-form__item--error'}`}\n                                onClick={() => this.setState({ selectedFieldNum: 3 })}>\n                                <div>\n                                    <div className={`form-tick ${this.state.validFields.includes('billingAddr') && \"form-tick-on\"}`}></div>\n                                    <label>Enter your billing address</label>\n                                </div>\n                                <FontAwesomeIcon icon={faArrowRight} className=\"icon__arrow-right\" />\n                            </div>\n                        </li>\n                        <li>\n                            <label>Provide a Date of Birth</label>\n                            <div className={`info-check-form__item ${this.state.fieldsToComplete.includes('dateOfBirth') && 'info-check-form__item--error'}`}\n                                onClick={() => this.setState({ selectedFieldNum: 4 })}>\n                                <div>\n                                    <div className={`form-tick ${this.state.validFields.includes('dateOfBirth') && \"form-tick-on\"}`}></div>\n                                    <label>Enter your date of birth</label>\n                                </div>\n                                <FontAwesomeIcon icon={faArrowRight} className=\"icon__arrow-right\" />\n                            </div>\n                        </li>\n                        <li>\n                            <label>Provide a Mobile Number</label>\n                            <div className={`info-check-form__item ${this.state.fieldsToComplete.includes('mobileNumber') && 'info-check-form__item--error'}`}\n                                onClick={() => this.setState({ selectedFieldNum: 5 })}>\n                                <div>\n                                    <div className={`form-tick ${this.state.validFields.includes('mobileNumber') && \"form-tick-on\"}`}></div>\n                                    <label>Enter your mobile number</label>\n                                </div>\n                                <FontAwesomeIcon icon={faArrowRight} className=\"icon__arrow-right\" />\n                            </div>\n                        </li>\n                    </ul>\n                }\n                {selectedFieldNum === 1 && <UploadPhoto userData={this.state.userInfo.photo} />}\n                {selectedFieldNum === 2 && <BankDetail userData={this.state.userInfo.bankDetail} />}\n                {selectedFieldNum === 3 && <BillingAddress userData={this.state.userInfo.billingAddr} />}\n                {selectedFieldNum === 4 && <DateOfBirth userData={this.state.userInfo.dateOfBirth} />}\n                {selectedFieldNum === 5 && <MobileNumber userData={this.state.userInfo.mobileNumber} />}\n\n                <div className=\"bottom-buttons\">\n                    {selectedFieldNum === 0\n                        ?\n                        <button onClick={() => {\n                            if (this.state.validFields && this.state.validFields.length === 5) {\n                                this.props.checkUser();\n                            } else {\n                                //在相应的field显示提示信息\n                                const fieldsToComplete = ['photo', 'bankDetail', 'billingAddr', 'dateOfBirth', 'mobileNumber'].filter(field => !this.state.validFields.includes(field))\n                                this.setState({ fieldsToComplete })\n                            }\n                        }}> Next </button>\n                        :\n                        <button onClick={async () => {\n                            this.setState({ selectedFieldNum: 0 });\n                            const result = await reqUserInfo(this.props.user.email);\n                            if (result.status === 0) {\n                                this.setState({ userInfo: result.data });\n                                this.updateValidFields(result.data);\n                            }\n                        }}> Before </button>}\n\n                </div>\n\n            </div>\n        );\n    }\n}\nexport default connect(state => ({ user: state.user }), { checkUser })(PersonalInfoCheck);\n"]},"metadata":{},"sourceType":"module"}