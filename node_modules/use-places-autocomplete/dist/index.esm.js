import{useState as t,useRef as e,useCallback as n,useEffect as r}from"react";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var f="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},l=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,d=/^0o[0-7]+$/i,y=parseInt,b="object"==typeof f&&f&&f.Object===Object&&f,g="object"==typeof self&&self&&self.Object===Object&&self,v=b||g||Function("return this")(),m=Object.prototype.toString,w=Math.max,O=Math.min,h=function(){return v.Date.now()};function j(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function P(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==m.call(t)}(t))return NaN;if(j(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=j(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(l,"");var n=p.test(t);return n||d.test(t)?y(t.slice(2),n?2:8):s.test(t)?NaN:+t}var S=function(t,e,n){var r,o,i,u,a,c,f=0,l=!1,s=!1,p=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function d(e){var n=r,i=o;return r=o=void 0,f=e,u=t.apply(i,n)}function y(t){return f=t,a=setTimeout(g,e),l?d(t):u}function b(t){var n=t-c;return void 0===c||n>=e||n<0||s&&t-f>=i}function g(){var t=h();if(b(t))return v(t);a=setTimeout(g,function(t){var n=e-(t-c);return s?O(n,i-(t-f)):n}(t))}function v(t){return a=void 0,p&&r?d(t):(r=o=void 0,u)}function m(){var t=h(),n=b(t);if(r=arguments,o=this,c=t,n){if(void 0===a)return y(c);if(s)return a=setTimeout(g,e),d(c)}return void 0===a&&(a=setTimeout(g,e)),u}return e=P(e)||0,j(n)&&(l=!!n.leading,i=(s="maxWait"in n)?w(P(n.maxWait)||0,e):i,p="trailing"in n?!!n.trailing:p),m.cancel=function(){void 0!==a&&clearTimeout(a),f=0,r=c=o=a=void 0},m.flush=function(){return void 0===a?u:v(h())},m},T="> ðŸ’¡use-places-autocomplete: Google Maps Places API library must be loaded. See: https://github.com/wellyshen/use-places-autocomplete#load-the-library",x=function(t){var e=t.address,n=t.placeId,r=new window.google.maps.Geocoder;return new Promise((function(t,o){r.geocode({address:e,placeId:n},(function(e,n){"OK"!==n&&o(n),t(e)}))}))},A=function(t){return new Promise((function(e,n){try{var r=t.geometry.location,o=r.lat,i=r.lng;e({lat:o(),lng:i()})}catch(t){n(t)}}))};export default function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=o.requestOptions,c=o.debounce,f=void 0===c?200:c,l=o.googleMaps,s=o.callbackName,p=t(!1),d=a(p,2),y=d[0],b=d[1],g=t(""),v=a(g,2),m=v[0],w=v[1],O=t({loading:!1,status:"",data:[]}),h=a(O,2),j=h[0],P=h[1],x=e(null),A=n((function(){var t=window.google,e=l&&l.places||t&&t.maps&&t.maps.places;e?(x.current=new e.AutocompleteService,b(!0)):console.error(T)}),[l]),I=n((function(){P({loading:!1,status:"",data:[]})}),[]),D=n(S((function(t){t?(P((function(t){return u({},t,{loading:!0})})),x.current.getPlacePredictions(u({},i,{input:t}),(function(t,e){P({loading:!1,status:e,data:t||[]})}))):I()}),f),[i,f]),E=n((function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];w(t),e&&D(t)}),[D]);return r((function(){var t=window.google;return l||t&&t.maps||!s?A():window[s]=A,function(){window[s]&&delete window[s]}}),[l,s,A]),{ready:y,value:m,suggestions:j,setValue:E,clearSuggestions:I}}export{x as getGeocode,A as getLatLng};
